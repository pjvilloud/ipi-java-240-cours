<!doctype html>

<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>IPI - Cours de Java 240</title>
    
    <meta name="description" content="" />
    <meta name="author" content="Pierre-Julien VILLOUD" />


    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/bootstrap-4-navbar.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <link href="css/idea.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />

    
</head>

<body class="impress-not-supported">

<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<nav class="navbar navbar-expand-lg navbar-light bg-light" id="my-navbar">
  <a class="navbar-brand" href="index.html">
    <img src="img/ipi.jpg" width="30" height="30" alt=""> Cours Java 240
  </a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="nav nav-pills mr-auto">
      
    </ul>
    <span class="navbar-text">
        <div class="btn-group" role="group" aria-label="Basic example">
            <form class="form-inline my-2 my-lg-0" onsubmit="search()">
              <div class="input-group">
                <input id="searchInput" class="form-control mr-sm-2" type="search" placeholder="Rechercher" aria-label="Rechercher">
                <div class="input-group-append">
                  <span class="input-group-text" id="searchNb"></span>
                  <button class="btn btn-primary" type="submit"><i class="fa fa-icon fa-search"></i></button>
                </div>
              </div>
              
              
            </form>
            &nbsp;
            <a class="btn btn-primary" href="https://github.com/pjvilloud/ipi-java-240-ex" target="_blank"><i class="fa fa-icon fa-gamepad"></i></a>
            &nbsp;
            <a class="btn btn-primary" href="mailto:pjvilloud@protonmail.com"><i class="fa fa-icon fa-envelope"></i></a>
            &nbsp;
            <a class="btn btn-primary" href="https://github.com/pjvilloud" target="_blank"><i class="fa fa-icon fa-github"></i></a>
            &nbsp;
            <a class="btn btn-primary" href="https://linkedin.com/pjvilloud" target="_blank"><i class="fa fa-icon fa-linkedin"></i></a>&nbsp;
            <a class="btn btn-primary" href="#" id="numSlide">1</a>
        </div>
    </span>
  </div>
</nav>
<div class="progress">
  <div id="progress" class="progress-bar" style="width: 0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<div class="container-fluid" id="impress">

  <div id="accueil" class="step slide" data-rel-x="0" data-y=0>
      <div class="jumbotron jumbotron-fluid">
        <div class="container text-center">
          <h1 class="display-3">Bienvenue !</h1>
          <p class="lead">
              <h2>Pierre-Julien VILLOUD</h2>
              <div class="big-top-margin">
                  <img src="img/pjvilloud.jpg" class="img-bienvenue rounded mx-auto d-block" alt="Pierre-Julien VILLOUD">
              </div>
              <div class="big-top-margin">
                  <h3><i class="fa fa-icon fa-envelope-square"></i>&nbsp;<a href="mailto:pjvilloud@protonmail.com">pjvilloud@protonmail.com</a></h3>
                  <h3><i class="fa fa-icon fa-github-square"></i>&nbsp;<a href="https://github.com/pjvilloud" target="_blank">https://github.com/pjvilloud</a></h3>
                  <h3><i class="fa fa-icon fa-linkedin-square"></i>&nbsp;<a href="https://linkedin.com/pjvilloud" target="_blank">https://linkedin.com/pjvilloud</a></h3>
                  <h3><i class="fa fa-icon fa-globe"></i>&nbsp;<a href="http://pjvilloud.github.io" target="_blank">http://pjvilloud.github.io</a></h3>
              </div>
          </p>
        </div>
      </div>
  </div>
  
  <div id="spring" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">Le framework Spring</h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Le framework Spring est un framework Java Open Source qui permet aux développeurs de se concentrer sur leur application en laissant la gestion des éléments d'infrastructure au framework.
          </div>
        </div>
        <div class="container small-font">
          <img width="1000" src="img/springframework.png">     
        </div>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;L'objectif est de développer rapidement et avec peu de code des applications riches et fiables dans un contexte d'entreprise.
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="spring-historique" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">Historique</h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Spring a été créé en 2003 pour fonctionner de manière complémentaire avec le standard J2EE de l'époque, alors relativement complexe. L'idée était de faciliter les tâches communes et de promouvoir les bonnes pratiques de développement.
          </div>
        </div>
        <div class="container-fluid small-font">
          <div class="row">
            <div class="col-2 text-right">
              <img src="img/springhistory2.png" height="615">
            </div> 
            <div class="col-10 text-left">
              <ul class="list-group">
                <li class="list-group-item">
                  <b>0.9</b> - Première version !
                </li>
                <li class="list-group-item"><b>1.0</b> - Optimisations diverses</li>
                <li class="list-group-item"><b>2.0</b> - Simplification des configurations XML, support de Groovy, de JPA</li>
                <li class="list-group-item"><b>2.5</b> - Configuration par annotations, support de Java 6, auto-détection des composants</li>
                <li class="list-group-item"><b>3.0</b> - Spring expression language, support des bases de données intégrées, validation des <em>model</em>, support de REST</li>
                <li class="list-group-item"><b>3.1</b> - Profils de beans, abstraction de cache</li>
                <li class="list-group-item"><b>4.0</b> - Support de Java 8, apparition de Spring Boot</li>
                <li class="list-group-item"><b>4.2</b> - Améliorations du Code Container et de la couche d'accès aux données</li>
                <li class="list-group-item"><b>4.3</b> - Améliorations du cache et des modules webs</li>
                <li class="list-group-item"><b>5.0</b> - Spring WebFlux, support de Kotlin</li>
              </ul>
            </div> 
            
          </div>
               
        </div>

        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Aujourd'hui, les infrastructures ont évolué et les applications sont maintenant développées en <em>devops</em> pour être déployées sur des plateformes de cloud. Spring a suivi cette évolution et le framework s'est enrichi de fonctionnalités qui vont dans ce sens.
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="spring-projets" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">Les différents projets</h1>
        <div class="container-fluid small-font">
            <img src="img/springprojects2.png">
        </div>
      </div>
    </div>
  </div>

    <div id="springconcepts" class="step slide">
        <div class="jumbotron jumbotron-fluid">
            <div class="container-fluid text-center">
                <h1 class="display-3">Les concepts</h1>
                <div class="alert alert-primary small-font" role="alert">
                    <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les concepts centraux de Spring sont l'<b>inversion de contrôle (ou IoC)</b> et l'<b>injection de dépendance (ou DI)</b>
                </div>
                <div class="container-fluid small-font">
                </div>
            </div>
        </div>
    </div>

  <div id="springconcepts-ioc" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">L'inversion de contrôle (IoC)</h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;L'inversion de contrôle ou <em>IoC</em> est au cœur de Spring. C'est le framework qui coordonne le flot d'exécution du programme et qui appelle vos propres composants logiciels.
          </div>
        </div>
        <div class="container-fluid small-font big-top-margin">
          <img src="img/K1337.png">
        </div>
        <div class="container-fluid big-top-margin">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;On parle <em>d'inversion de contrôle</em> car c'est traditionnellement l'inverse en programmation classique. Vous coordonnez le flot d'exécution et vous gérez le cycle de vie et les dépendances entre vos composants.
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="springconcepts-di" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">L'injection de dépendances (DI)</h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;C'est une implémentation de l'inversion de contrôle utilisée dans les langages orientés objet. Le principe est qu'au lieu de coder en dur les dépendances entre les composants, vous déléguez l'instantiation et la gestion de ces composants au framework qui les stockera dans sont <b>conteneur</b> et pourra vous les <b>fournir</b> à la demande.
          </div>
        </div>
        <div class="container little-top-margin smaller-font">
          <div class="row">
            <div class="col-5 big-top-margin">
              <img src="img/traditional-vs-di.gif">    
            </div>
            <div class="col-7">
              <ul class="list-group">
                <li class="list-group-item list-group-item-success">Réduction au maximum des dépendances entre les composants logiciels</li>
                <li class="list-group-item list-group-item-success">Maintenance et évolutions plus maitrisées</li>
                <li class="list-group-item list-group-item-success">Utilisation possible d'implémentations différentes d'un composant sans tout modifier.</li>
                <li class="list-group-item list-group-item-success">Plus de gestion manuelle du cycle de vie des composants.</li>
                <li class="list-group-item list-group-item-success">Patterns de développement comme le <em>singleton</em> utilisables très facilement.</li>
                <li class="list-group-item list-group-item-success">Code plus facile à tester (mocks), à lire et à réutiliser.</li>
                <li class="list-group-item list-group-item-warning">Ajout d'une dépendance à un framework potentiellement <em>lourd</em> ?</li>
                <li class="list-group-item list-group-item-warning">Perte de contrôle ?</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="alert alert-primary small-font little-top-margin" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;En réalité, l'<b>injection de dépendances</b> vous permet de vous concentrer sur votre cœur de métier et de produire du code de meilleure qualité !
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="springconcepts-core" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">Spring Core</h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Spring Core est un des projets du framework Spring mais en est le socle. Ce framework implémente l'injection de dépendances. On appelle <b>Core Container</b> l'ensemble des modules suivants :
          </div>
        </div>
        <div class="container-fluid small-font big-top-margin">
          <div class="row">
            <div class="col-3 rounded border bg-primary p-4">Beans</div>
            <div class="col-3 rounded border bg-primary p-4">Core</div>
            <div class="col-3 rounded border bg-success p-4">Context</div>
            <div class="col-3 rounded border bg-warning p-4">SpEL</div>
          </div>
        </div>
        <div class="container-fluid small-font little-top-margin">
          <div class="row">
            <div class="col-6 rounded border border-primary">
              <em>Core</em> et <em>Beans</em> sont les modules qui implémentent l'inversion de contrôle et l'injection de dépendences.
            </div>
            <div class="col-3 rounded border border-success">
              <em>Context</em> est une sorte de registre permettant de construire, stocker et injecter les différents composants de votre application.
            </div>
            <div class="col-3 rounded border border-warning">
              <em>SpEL</em> ou <em>Spring Expression Language</em> permet de consulter et manipuler le <em>graph d'objets</em> à l'exécution.
            </div>
          </div>
        </div>
        <div class="container-fluid big-top-margin">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;On parle bien ici de <b>conteneur</b>, Spring est considéré comme un <b>conteneur léger</b> car il peut stocker n'importe quel type d'objets contrairement à des <b>conteneurs lourds</b> dont les objets doivent obligatoirement implémenter certaines interfaces (ex : serveurs d'application).
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="springbeans" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">Les <code>Beans</code> <img src="img/coffee_bean.png" height="90"></h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les <em>beans</em> sont tout simplement les objets gérés par le conteneur Spring.
          </div>
        </div>
        <div class="container-fluid small-font little-top-margin">
            <div class="row">
                <div class="col-6">
                    <img src="img/beans.png">
                    <img src="img/container-magic.png">
                </div>
                <div class="col-6 mt-5">
                    <ul class="list-group mt-5">
                        <li class="list-group-item mt-5">Un bean doit être décrit dans une <b>configuration de bean</b> à fournir au conteneur Spring.</li>
                        <li class="list-group-item">Lorsqu'il y a des dépendances entre des beans, Spring lie ces derniers entre eux par <b>injection</b>.</li>
                        <li class="list-group-item">Les déclarations de beans permettent aux beans d'être instantiés, stockés, gérés et détruits par le conteneur Spring via l'<code>ApplicationContext</code>.</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="container-fluid little-top-margin">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Voyons maintenant chacune de ces notions.
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="springbeans-beanconfiguration" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">Les configurations de <code>Beans</code> <img src="img/coffee_bean.png" height="90"></h1>
        <div class="container-fluid" style="margin-top:-25px">
          <div class="alert alert-primary small-font" role="alert" >
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Voici comment définir un <em>bean</em> dans une application Spring (XML à gauche et annotations Java à droite) : 
          </div>
        </div>
        <div class="container-fluid small-font">
          <div class="row">
            <div class="col-6">
              <ul class="list-group">
                <li class="list-group-item list-group-item-secondary">Eléments à définir</li>
                <li class="list-group-item">La classe</li>
                <li class="list-group-item">Le nom</li>
                <li class="list-group-item"><span data-html="true" data-template='<div class="popover large-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>' data-trigger="hover" data-toggle="popover" data-placement="right" data-content="<ul><li><code>singleton</code> : (par défaut) Un seul bean instantié par contexte.</li><li><code>prototype</code> : Un nouveau bean est instancié à chaque fois que ce bean est demandé.</li><li><code>request</code> : (web) Un bean instantié à chaque requête HTTP.</li><li><code>session</code> : Un bean est instancié pour chaque session.</li><li><code>application</code> : Un bean est instancié pour toute la durée de vie de la Servlet.</li><li><code>websocket</code> : Un bean est instancié pour toute la durée de vie de la socket.</li></ul>" >Le scope</span></li>
                  <li class="list-group-item"><span data-html="true" data-trigger="hover" data-toggle="popover" data-placement="right" data-content="Une bonne pratique consiste à utiliser les arguments de constructeurs pour les propriétés obligatoires et les setters pour les propriétés facultatives.">Les arguments du constructeur et les autres propriétés</span></li>
                <li class="list-group-item">L'initialisation/destruction</li>
              </ul> 
            </div> 
            <div class="col-6 text-left">
              <pre><code class="java">//Soit la classe suivante que l'on faire gérer par Spring
public class BeanExemple{
  private String msg;
  private String nom;
  public void getNom(){return nom;}
  public void setNom(String n){nom = n;}
  public BeanExemple(String m){msg=m;}
  public void init() {}
  public void cleanup() {}
}</code></pre></div>
          </div>
        </div>
        <hr>
        <div class="container-fluid small-font">
          <div class="row">
            <div class="col-6 text-left" style="margin-left:-80px">
              <pre><code class="xml">&lt;!-- applicationContext.xml --&gt;
&lt;?xml version = "1.0" encoding = "UTF-8"?&gt;
&lt;beans xmlns = "..." ... &gt;
&lt;bean name="beanExemple" class="c.i.BeanExemple"
  scope="prototype" init-method="init" destroy-method="cleanup"&gt;
  &lt;constructor-arg value = "Hello "/&gt;&lt;!-- OU --&gt;
  &lt;constructor-arg index = "0" value = "Hello "/&gt;&lt;!-- OU --&gt;
  &lt;constructor-arg type = "java.lang.String" value = "Hello "/&gt;
  &ltproperty name = "nom" value = "World"/&gt;
&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
            </div>
            <div class="col-6 text-left">
              <pre><code class="java">@Configuration
public class SpringConfig {
  @Bean(initMethod = "init", destroyMethod = "cleanup")
  @Scope("prototype")
  public BeanExemple beanExemple(){
    BeanExemple be = new BeanExemple("Hello ");
    be.setNom("World");
    return be;
  }
}</code></pre>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div id="springbeans-injection" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">L'injection de beans</h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Voici comment <em>injecter</em> un bean dans un autre :
          </div>
        </div>
        <div class="container small-font">
          <div class="row">
            <div class="col-3"></div>
            <div class="col-9 text-left">
              <pre><code class="java">public class BeanExemple{
  private AutreBeanEx autreBean;
  public void getAutreBean(){ return autreBean; }
  public void setAutreBean(String b){
    autreBean = b;
  }
}</code></pre></div>
          </div>
        </div>
        <hr>
        <div class="container-fluid small-font">
          <div class="row">
            <div class="col-6 text-left">
              <pre><code class="xml">&lt;!-- applicationContext.xml --&gt;
&lt;?xml version = "1.0" encoding = "UTF-8"?&gt;
&lt;beans xmlns = "..." ... &gt;
  &lt;bean name="autreBean" class="com.ipiecoles.AutreBeanEx"/&gt;

  &lt;bean name="beanExemple" class="com.ipiecoles.BeanExemple"&gt;
    &lt;property name="autreBean" ref="autreBean"/&gt;
  &lt;bean/&gt;
&lt;/beans&gt;</code></pre>
            </div>
            <div class="col-6 text-left">
              <pre><code class="java">@Configuration
public class SpringConfig {
  @Bean 
  public BeanExemple beanExemple(){
    BeanExemple b = new BeanExemple();
    b.setAutreBean(autreBeanEx());
  }
  @Bean 
  public AutreBeanEx autreBeanEx(){
    return new AutreBeanEx();
  }
}</code></pre>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div id="springsimplifier" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3">Simplifier et automatiser</h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est possible de simplifier les déclarations de beans et d'automatiser les injections en faisant <em>scanner</em> un package par Spring à la recherche de beans qui comporteront des annotations spécifiques.
          </div>
        </div>
        <div class="container-fluid small-font">
          <div class="row">
            <div class="col-6 text-left">
              <pre><code class="java">//Annotation des beans à gérer par Spring avec @Component
//(seulement pour les singletons)
@Component
public class BeanExemple{
  //Injection d'un bean avec @Autowired, l'injection se fait par
  //type. Attention, si deux beans existent du même type,
  //cette injection échouera !
  @Autowired
  private AutreBeanEx autreBean;
}

@Component
public class AutreBeanEx{
}</code></pre></div>
              <div class="col-6 text-left">
              <pre><code class="java">@Configuration
//L'annotation @ComponentScan permet de dire à Spring
//de chercher les beans dans toutes les classes de ce
//ce package.
@ComponentScan(basePackages = "com.ipiecoles")
public class SpringConfig {

}</code></pre>
              </div>
          </div>
        </div>
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les annotations <code>@Service</code>, <code>@Controller</code>, <code>@Repository</code> sont des spécialisations de
              <code>@Component</code> et permettent à ces beans particuliers d'être traités de manière optimale par Spring.
          </div>
      </div>
    </div>
  </div>

    <div id="springsimplifier-2" class="step slide">
        <div class="jumbotron jumbotron-fluid">
            <div class="container-fluid text-center">
                <h1 class="display-3">Simplifier et automatiser (2/3)</h1>
                <div class="container-fluid">
                    <div class="alert alert-primary small-font" role="alert">
                        <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est possible de simplifier les déclarations de beans et d'automatiser les injections en faisant <em>scanner</em> un package par Spring à la recherche de beans qui comporteront des annotations spécifiques.
                    </div>
                </div>
                <div class="container-fluid small-font">
                    <div class="row">
                        <div class="col-6 text-left">
              <pre><code class="java">//Annotation des beans à gérer par Spring avec @Component
//(seulement pour les singletons)
@Component
public class BeanExemple{
  //Utiliser @Resource pour injecter explicitement par nom
  @Resource(name = "autreBean1")
  private AutreBeanEx autreBean1;
  //Ici @Autowired fonctionne car @Primary a été mis
  //sur le bean principal
  //On peut utiliser aussi @Qualifier
  @Autowired
  private AutreBeanEx autreBean;
}

public class AutreBeanEx{
  private String nom;
  private AutreBeanEx(String n){nom = n;}
}</code></pre></div>
                        <div class="col-6 text-left">
              <pre><code class="java">@Configuration
//L'annotation @ComponentScan permet de dire à Spring
//de chercher les beans dans toutes les classes de ce
//ce package.
@ComponentScan(basePackages = "com.ipiecoles")
public class SpringConfig {
    @Bean(name = "autreBean1")
    public AutreBeanEx autreBean1(){
        return new AutreBeanEx("Hello");
    }
    @Bean(name = "autreBean")
    //L'annotation @Primary permet de lever le doute
    //lorsque plusieurs beans ont le même type.
    @Primary
    public AutreBeanEx autreBean(){
        return new AutreBeanEx("World");
    }
}</code></pre>
                        </div>
                    </div>
                </div>
                <div class="alert alert-primary small-font" role="alert">
                    <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les annotations <code>@Service</code>, <code>@Controller</code>, <code>@Repository</code> sont des spécialisations de
                    <code>@Component</code> et permettent à ces beans particuliers d'être traités de manière optimale par Spring.
                </div>
            </div>
        </div>
    </div>

<div id="springsimplifier-3" class="step slide">
        <div class="jumbotron jumbotron-fluid">
            <div class="container-fluid text-center">
                <h1 class="display-3">Simplifier et automatiser (3/3)</h1>
                <div class="container-fluid">
                    <div class="alert alert-primary small-font" role="alert">
                        <i class="fa fa-icon fa-info-circle"></i>&nbsp;Il est possible de définir tous les éléments définis dans une configuration XML dans une configuration Java basée sur les annotations.
                    </div>
                </div>
                <div class="container-fluid small-font">
                    <div class="row">
                        <div class="col-6 text-left">
              <pre><code class="java">public class AutreBeanEx{
  @PostConstruct //remplace init-method
  public void afterInit() {
      // Instructions à exécuter après l'instanciation
  }

  @PreDestroy //remplace destroy-method
  public void beforeDestroy() {
      // Instructions à exécuter avant la destruction
  }
}</code></pre></div>
                        <div class="col-6 text-left">
              <pre><code class="java">@Configuration
public class SpringConfig {
    @Bean
    @Scope("prototype")
    public AutreBeanEx autreBean(){
        return new AutreBeanEx();
    }
}</code></pre>
                        </div>
                    </div>
                </div>
                <div class="alert alert-primary small-font" role="alert">
                    <i class="fa fa-icon fa-info-circle"></i>&nbsp;Les annotations <code>@Service</code>, <code>@Controller</code>, <code>@Repository</code> sont des spécialisations de
                    <code>@Component</code> et permettent à ces beans particuliers d'être traités de manière optimale par Spring.
                </div>
            </div>
        </div>
    </div>

    <div id="springsimplifier-properties" class="step slide">
        <div class="jumbotron jumbotron-fluid">
            <div class="container-fluid text-center">
                <h1 class="display-3">Les fichiers <code>.properties</code></h1>
                <div class="container-fluid">
                    <div class="alert alert-primary small-font" role="alert">
                        <i class="fa fa-icon fa-info-circle"></i>&nbsp;Vous pouvez définir des informations de configuration dans des fichiers <code>.properties</code> comme nous l'avons vu dans des cours précédents. Vous pouvez récupérer ces propriétés qui sont stockées dans le conteneur Spring, soit comme paramètres de construction de beans, ou directement dans votre application.
                    </div>
                </div>
                <div class="container-fluid small-font">
                    <div class="row text-left">
                        <div class="col-4"></div>
                        <div class="col-4">
                        <pre><code class="ruby">#app.properties
ipi.nom=IPI
ipi.message=Hello</code></pre>
                        </div>

                    </div>
                </div>
                <div class="container-fluid small-font">
                    <div class="row text-left">
                        <div class="col-8 pr-0">
                            <pre><code class="xml">
&lt;beans&gt;
&lt;bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
    &lt;property name="locations" value="classpath:app.properties"/&gt;
&lt;/bean&gt;
&lt;!-- OU --&gt;
&lt;context:property-placeholder location="classpath:app.properties"/&gt;

&lt;bean id="beanExemple" class="com.ipiecoles.BeanExemple"&gt;
    &lt;property name="nom" value="${ipi.nom}"/&gt;
    &lt;property name="message" value="${ipi.message}"/&gt;
&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
                        </div>
                        <div class="col-4" style="margin-left: -40px; margin-right: 0;">
                            <pre><code class="java">@Configuration
@PropertySource("classpath:app.properties")
public class SpringConfig {
    @Value("${ipi.nom}")
    private String nom;
    @Value("${ipi.message}")
    private String message;
    @Bean(name = "beanExemple")
    public BeanExemple beanExemple(){
        return new
          BeanExemple(message, nom);
    }
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


  <div id="springapplicationcontext" class="step slide">
    <div class="jumbotron jumbotron-fluid">
      <div class="container-fluid text-center">
        <h1 class="display-3"><code>ApplicationContext</code></h1>
        <div class="container-fluid">
          <div class="alert alert-primary small-font" role="alert">
              <i class="fa fa-icon fa-info-circle"></i>&nbsp;Maintenant que nous avons définis nos <em>beans</em> et les relations entre ces derniers, voyons comment les stocker dans l'<code>ApplicationContext</code> pour qu'ils puissent être gérés par le conteneur.
          </div>
        </div>
        <div class="container-fluid small-font">
          <div class="row text-left">
              <pre><code class="java">package com.ipiecoles;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.*;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp {
   public static void main(String[] args) {
        //Configuration Java
        ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringConfig.class);
        //OU Configuration XML
        ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");

        BeanExemple be = ctx.getBean(BeanExemple.class);
        //be peut être utilisé dans ce main et les beans déclarés
        //dans la configuration ont été intégrés dans le conteneur
   }
}</code></pre>
          </div>      
        </div>
      </div>
    </div>
  </div>

</div>

<script src="js/impress.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/mark.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-4-navbar.js"></script>
<script src="js/highlight.min.js"></script>
<script src="js/moment.min.js"></script>
<script src="js/script.js"></script>
<script src="js/search.js"></script>

